{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\IdeaProjects\\\\tscontrol\\\\src\\\\components\\\\MoviesListComponent\\\\MoviesListComponent.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { moviesService, genresService } from \"../../services/axiosService\";\nimport { MoviesListCard } from \"../MovieListCardComponent/MovieListCardComponent\";\nimport { usePageQuery } from \"../../services/pagination\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MoviesListComponent = ({\n  selectedGenre,\n  searchTerm\n}) => {\n  _s();\n  const {\n    page: queryPage,\n    prevPage,\n    nextPage\n  } = usePageQuery();\n  const page = queryPage ? parseInt(queryPage, 10) : 1;\n  const navigate = useNavigate();\n  const [movies, setMovies] = useState([]);\n  const [filteredMovies, setFilteredMovies] = useState([]);\n  const [genres, setGenres] = useState({});\n  useEffect(() => {\n    moviesService.getAll(page).then(({\n      data\n    }) => {\n      setMovies(data.results);\n      setFilteredMovies(data.results);\n    });\n    genresService.getAll().then(({\n      data\n    }) => {\n      if (data && data.genres) {\n        const genresDict = data.genres.reduce((acc, genre) => {\n          acc[genre.id] = genre.name;\n          return acc;\n        }, {});\n        setGenres(genresDict);\n      }\n    });\n  }, [page]);\n  useEffect(() => {\n    let filtered = movies;\n    if (selectedGenre) {\n      filtered = filtered.filter(movie => movie.genre_ids.includes(selectedGenre));\n    }\n    if (searchTerm) {\n      filtered = filtered.filter(movie => movie.title.toLowerCase().includes(searchTerm.toLowerCase()));\n    }\n    setFilteredMovies(filtered);\n  }, [selectedGenre, searchTerm, movies]);\n  const movieClick = movieId => {\n    navigate(`/movies/${movieId}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between'\n      },\n      children: filteredMovies.map(movie => /*#__PURE__*/_jsxDEV(MoviesListCard, {\n        movie: movie,\n        movieClick: movieClick,\n        genreDictionary: genres\n      }, movie.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: prevPage,\n        children: \"Previous page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Current page \", page]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: nextPage,\n        children: \"Next page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(MoviesListComponent, \"iAZY9X0UPBRBaU1SG3qlX3fgt14=\", false, function () {\n  return [usePageQuery, useNavigate];\n});\n_c = MoviesListComponent;\nvar _c;\n$RefreshReg$(_c, \"MoviesListComponent\");","map":{"version":3,"names":["useEffect","useState","moviesService","genresService","MoviesListCard","usePageQuery","useNavigate","jsxDEV","_jsxDEV","MoviesListComponent","selectedGenre","searchTerm","_s","page","queryPage","prevPage","nextPage","parseInt","navigate","movies","setMovies","filteredMovies","setFilteredMovies","genres","setGenres","getAll","then","data","results","genresDict","reduce","acc","genre","id","name","filtered","filter","movie","genre_ids","includes","title","toLowerCase","movieClick","movieId","children","style","display","flexWrap","justifyContent","map","genreDictionary","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Dell/IdeaProjects/tscontrol/src/components/MoviesListComponent/MoviesListComponent.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\nimport {moviesService, genresService } from \"../../services/axiosService\";\r\nimport {MoviesListCard} from \"../MovieListCardComponent/MovieListCardComponent\";\r\nimport {MovieDetails} from \"../MovieDetailsComponent/MovieDetailsComponent\";\r\nimport {usePageQuery} from \"../../services/pagination\";\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nimport {GenreDictionary} from \"../GenreListComponent/GenreListComponent\";\r\n\r\nimport {Movie, Genre} from \"../../services/axiosService\";\r\n\r\n\r\n\r\ninterface MoviesListComponentProps {\r\n    selectedGenre?: number | null;\r\n    searchTerm?: string;\r\n}\r\n\r\n\r\n\r\nexport const MoviesListComponent: React.FC<MoviesListComponentProps> = ({ selectedGenre, searchTerm }) => {\r\n    const { page: queryPage, prevPage, nextPage } = usePageQuery();\r\n    const page = queryPage ? parseInt(queryPage, 10) : 1;\r\n    const navigate = useNavigate();\r\n    const [movies, setMovies] = useState<Movie[]>([]);\r\n    const [filteredMovies, setFilteredMovies] = useState<Movie[]>([]);\r\n    const [genres, setGenres] = useState<GenreDictionary>({} as GenreDictionary);\r\n\r\n    useEffect(() => {\r\n        moviesService.getAll(page).then(({ data }) => {\r\n            setMovies(data.results);\r\n            setFilteredMovies(data.results);\r\n        });\r\n\r\n        genresService.getAll().then(({ data }) => {\r\n            if (data && data.genres) {\r\n                const genresDict = data.genres.reduce((acc: GenreDictionary, genre: Genre) => {\r\n                    acc[genre.id] = genre.name;\r\n                    return acc;\r\n                }, {} as GenreDictionary);\r\n                setGenres(genresDict);\r\n            }\r\n        });\r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        let filtered = movies;\r\n\r\n        if (selectedGenre) {\r\n            filtered = filtered.filter(movie => movie.genre_ids.includes(selectedGenre));\r\n        }\r\n\r\n        if (searchTerm) {\r\n            filtered = filtered.filter(movie => movie.title.toLowerCase().includes(searchTerm.toLowerCase()));\r\n        }\r\n\r\n        setFilteredMovies(filtered);\r\n    }, [selectedGenre, searchTerm, movies]);\r\n\r\n    const movieClick = (movieId: number) => {\r\n        navigate(`/movies/${movieId}`);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-between' }}>\r\n                {filteredMovies.map((movie) => (\r\n                    <MoviesListCard\r\n                        key={movie.id}\r\n                        movie={movie}\r\n                        movieClick={movieClick}\r\n                        genreDictionary={genres}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <div>\r\n                <button onClick={prevPage}>Previous page</button>\r\n                <span>Current page {page}</span>\r\n                <button onClick={nextPage}>Next page</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}